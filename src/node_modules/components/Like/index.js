import React from 'react';
import classNames from 'classnames';
import { connect } from 'react-redux';

import { like, unlike } from 'actions/articles';

import { ReactComponent as UnlikeSVG } from './unlike.svg';
import { ReactComponent as LikeSVG } from './like.svg';

import './like.scss';

function Like({ favorited, favoritesCount, like, unlike, slug, isFetchingLikeAndUnlike }) {

    const handleClick = (event) => {
        event.preventDefault();
        if (favorited) {
            unlike(slug);
        } else {
            like(slug);
        }
    };

    const classes = classNames('like', {
        unlike: favorited,
    });

    return (
        <button
            type="button"
            className={classes}
            onClick={handleClick}
            disabled={isFetchingLikeAndUnlike}
        >
            {favorited ? <UnlikeSVG /> : <LikeSVG />}
            <span className="like-counter">{favoritesCount}</span>
        </button>
    );
}

const mapStateToProps = (state) => ({
    isFetchingLikeAndUnlike: state.articles.isFetchingLikeAndUnlike,
});

const mapDispatchToProps = {
    like,
    unlike,
};

export default connect(mapStateToProps, mapDispatchToProps)(Like);