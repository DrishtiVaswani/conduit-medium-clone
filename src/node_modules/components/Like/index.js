import React from 'react';
import { connect } from 'react-redux';
import { Button } from 'antd';
import { LikeOutlined, DislikeOutlined } from '@ant-design/icons';

import { like, unlike } from 'actions/like';

import './like.scss';

function Like({ favorited, favoritesCount, like, unlike, slug, isFetchingLikeAndUnlike }) {

    const handleClick = (event) => {
        event.preventDefault();
        if (favorited) {
            unlike(slug);
        } else {
            like(slug);
        }
    };

    return (
        <Button
            type="primary"
            icon={!favorited ? <LikeOutlined /> : <DislikeOutlined />}
            loading={isFetchingLikeAndUnlike}
            disabled={isFetchingLikeAndUnlike}
            onClick={handleClick}
            danger={favorited}
        >
            <span>{favoritesCount}</span>
        </Button>
    );
}

const mapStateToProps = (state) => ({
    isFetchingLikeAndUnlike: state.articles.isFetchingLikeAndUnlike,
});

const mapDispatchToProps = {
    like,
    unlike,
};

export default connect(mapStateToProps, mapDispatchToProps)(Like);