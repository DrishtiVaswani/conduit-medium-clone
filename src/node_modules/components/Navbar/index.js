import React from 'react';
import { Link } from 'react-router-dom';
import { Avatar, Menu, Dropdown } from 'antd';
import { UserOutlined, SettingOutlined, ImportOutlined, HomeOutlined } from '@ant-design/icons';

import Logo from 'components/Logo';

import './navbar.scss';

function Navbar({ user, isAuthenticated }) {

    const signIn = (
        <Menu>
            <Menu.Item key="0">
                <Link to="/login">Войти</Link>
            </Menu.Item>

            <Menu.Item key="1">
                <Link to="/register">Регистрация</Link>
            </Menu.Item>
        </Menu>
    );

    const signUp = (
        <Menu mode="horizontal">
            <Menu.Item key="0" icon={<UserOutlined />}>
                <Link to={`/@${user.username}`}>Профиль</Link>
            </Menu.Item>

            <Menu.Item key="1" icon={<SettingOutlined />}>
                <Link to={`/@${user.username}/edit`}>Редактировать</Link>
            </Menu.Item>

            <Menu.Divider />

            <Menu.Item key="3" icon={<ImportOutlined />} danger>Выход</Menu.Item>
        </Menu>
    );

    const userDropdownMenu = isAuthenticated ? signUp : signIn;

    return (
        <nav className="navbar">
            <div className="container">
                <Logo />
                <div style={{ display: 'flex', alignItems: 'center' }}>
                    <Menu>
                        <Menu.Item
                            icon={<HomeOutlined />}
                        >
                            <Link to="/">Главная</Link>
                        </Menu.Item>
                    </Menu>

                    <div className="user-account">
                        <Dropdown overlay={userDropdownMenu} trigger={['click']} placement="bottomRight">
                            <Link to="#" className="ant-dropdown-link" onClick={e => e.preventDefault()}>
                                <Avatar size={32} icon={<UserOutlined />} src={user.image} />
                            </Link>
                        </Dropdown>
                    </div>
                </div>
            </div>
        </nav>
    );
}

export default Navbar;