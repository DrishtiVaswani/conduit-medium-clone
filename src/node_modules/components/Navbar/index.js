import React from 'react';
import { Link } from 'react-router-dom';
import { Avatar, Menu, Popover } from 'evergreen-ui';

import Logo from 'components/Logo';

import './navbar.scss';

function Navbar({ isAuthenticated, username = '', image = null }) {

    const signIn = (
        <Menu>
            <Menu.Group>
                <Menu.Item
                    is="a"
                    href="/login"
                >
                    Войти
                </Menu.Item>

                <Menu.Item
                    is="a"
                    href="/register"
                >
                    Регистрация
                </Menu.Item>
            </Menu.Group>
        </Menu>
    );

    const signUp = (
        <Menu>
            <Menu.Group>
                <Link
                    to={`/@${username}`}
                >
                    <Menu.Item
                        icon="people"
                    >
                        Профиль
                    </Menu.Item>
                </Link>

                <Link
                    to={`/@${username}/edit`}
                >
                    <Menu.Item
                        icon="edit"
                        secondaryText="⌘R"
                    >
                        Редактировать
                    </Menu.Item>
                </Link>
            </Menu.Group>

            <Menu.Divider/>

            <Menu.Group>
                <Menu.Item
                    icon="circle-arrow-left"
                    intent="danger"
                >
                    Выход
                </Menu.Item>
            </Menu.Group>
        </Menu>
    );

    const userDropdownMenu = isAuthenticated ? signUp : signIn;

    return (
        <nav className="navbar">
            <div className="container">
                <Logo/>
                <div style={{ display: 'flex', alignItems: 'center' }}>
                    <div className="user-account">
                        <Popover
                            content={userDropdownMenu}
                        >
                            <Link
                                to="#"
                            >
                                <Avatar
                                    isSolid
                                    src={image}
                                    name={username || 'U'}
                                    size={32}
                                />
                            </Link>
                        </Popover>
                    </div>
                </div>
            </div>
        </nav>
    );
}

export default Navbar;