import React from 'react';
import { IconButton } from 'evergreen-ui';
import marked from 'marked';

import Author from 'components/Author';

import './comment.scss';

function Comment({ id, createdAt, updatedAt, body, author, currentUser, slug, deleteComment }) {

    const markup = { __html: marked(body) };

    const handleClickDelete = (event) => {
        event.preventDefault();
        deleteComment(slug, id);
    };

    return (
        <div className="comment">
            <Author {...author} createdAt={createdAt}/>
            <div className="comment-text" dangerouslySetInnerHTML={markup}></div>
            <div
                style={{
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'space-between',
                }}
            >
                <IconButton appearance="minimal" icon="heart" iconSize={16}/>
                {currentUser && (
                    <IconButton
                        intent="danger"
                        appearance="minimal"
                        icon="trash"
                        iconSize={16}
                        onClick={handleClickDelete}
                    />
                )}
            </div>
        </div>
    );
}

export default Comment;