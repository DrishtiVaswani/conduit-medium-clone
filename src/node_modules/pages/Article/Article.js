import React from 'react';
import PropTypes from 'prop-types';
import { Alert, Pane, Spinner } from 'evergreen-ui';

import Cover from 'components/Cover';
import ArticleSingle from './components/ArticleSingle';
import Comments from './components/Comments';

function Article({ isFetching, data, errorMessage, comments, createComment, slug, currentUser }) {

    return (
        <>
            <Cover/>
            <div className="main">
                <div className="container">
                    <div style={{ height: '50px' }}></div>
                    {errorMessage && (
                        <Alert
                            intent="danger"
                            title={errorMessage}
                        />
                    )}
                    {isFetching && (
                        <Pane display="flex" alignItems="center" justifyContent="center" height={400}>
                            <Spinner/>
                        </Pane>
                    )}
                    <ArticleSingle {...data} currentUser={currentUser} />
                    <div style={{ height: '50px' }}></div>
                </div>
                <section style={{
                    background: '#fafafa',
                }}>
                    <div className="container">
                        <Comments
                            {...comments}
                            currentUser={currentUser}
                            slug={slug}
                            createComment={createComment}
                        />
                        <div style={{ height: '50px' }}></div>
                    </div>
                </section>
            </div>
        </>
    );
}

Article.propTypes = {
    isFetching: PropTypes.bool.isRequired,
    data: PropTypes.any,
    errorMessage: PropTypes.string,
    comments: PropTypes.object.isRequired,
};

export default Article;