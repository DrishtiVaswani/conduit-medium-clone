import { GET_TAGS_FAILURE, GET_TAGS_REQUEST, GET_TAGS_SUCCESS } from '../actionTypes';
import { defaultErrorMessage } from '../constants';
import Api from 'api';

const tagsRequest = () => ({
    type: GET_TAGS_REQUEST,
});

const tagsSuccess = (tags) => ({
    type: GET_TAGS_SUCCESS,
    payload: tags,
});

const tagsFailure = (errorMessage = defaultErrorMessage) => ({
    type: GET_TAGS_FAILURE,
    payload: errorMessage,
    error: true,
});

export const fetchTags = () => async (dispatch) => {

    dispatch(tagsRequest());

    try {
        const response = await Api.Tags.getAll();
        dispatch(tagsSuccess(response.data.tags));
    } catch (error) {
        dispatch(tagsFailure(error.response.data.errors));
    }
};