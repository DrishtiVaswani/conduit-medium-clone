import { defaultErrorMessage } from 'pages/Home/constants';
import Api from 'api';
import {
    APPLY_TAG_FILTER_FAILURE,
    APPLY_TAG_FILTER_REQUEST,
    APPLY_TAG_FILTER_SUCCESS,
} from 'pages/Home/actionTypes';

const tagRequest = () => ({
    type: APPLY_TAG_FILTER_REQUEST,
});

const tagSuccess = (tag) => ({
    type: APPLY_TAG_FILTER_SUCCESS,
    payload: tag,
});

const tagFailure = (errorMessage = defaultErrorMessage) => ({
    type: APPLY_TAG_FILTER_FAILURE,
    payload: errorMessage,
    error: true,
});

export const fetchTag = (tag, page) => (dispatch) => {

    dispatch(tagRequest);

    Api.Articles.byTag(tag, page)
        .then((result) => {
            console.log(result);
            dispatch(tagSuccess(result.data));
        })
        .catch((error) => {
            dispatch(tagFailure(error.message));
        });
};