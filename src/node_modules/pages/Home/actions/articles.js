import { FETCH_ARTICLES_FAILURE, FETCH_ARTICLES_SUCCESS, FETCH_ARTICLES_REQUEST } from 'pages/Home/actionTypes';
import Api from 'api';
import { defaultErrorMessage } from 'pages/Home/constants';

const articlesRequest = () => ({
    type: FETCH_ARTICLES_REQUEST,
});

const articlesSuccess = (articles) => ({
    type: FETCH_ARTICLES_SUCCESS,
    payload: articles,
});

const articlesFailure = (errorMessage = defaultErrorMessage) => ({
    type: FETCH_ARTICLES_FAILURE,
    payload: errorMessage,
    error: true,
});

export const fetchArticles = (offset, limit) => (dispatch) => {

    dispatch(articlesRequest());

    Api.Articles.getAll(offset, limit)
        .then((result) => {
            dispatch(articlesSuccess(result.data));
        })
        .catch((error) => {
            dispatch(articlesFailure(error.message));
        });
};